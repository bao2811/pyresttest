================================================================================
HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG PARALLEL EXECUTION Vá»šI CLI
================================================================================

NgÃ y: 12/12/2025
TÃ¡c giáº£: bao2811
Má»¥c Ä‘Ã­ch: HÆ°á»›ng dáº«n cháº¡y nhiá»u file test YAML song song vá»›i workers

================================================================================
1. CÃ‚U Há»I Cá»¦A Báº N
================================================================================

Lá»‡nh: pyresttest http://localhost:8000 api_test/suites/*.yaml --workers 5

â“ Dá»± Ã¡n Ä‘Ã£ há»— trá»£ cháº¡y lá»‡nh nÃ y chÆ°a?

âœ… ÄÃP ÃN: HOÃ€N TOÃ€N Há»– TRá»¢!

Dá»± Ã¡n PyRestTest Ä‘Ã£ Ä‘Æ°á»£c nÃ¢ng cáº¥p vÃ  HOÃ€N TOÃ€N Há»– TRá»¢ lá»‡nh nÃ y vá»›i:
- âœ… Flag `--tests` Ä‘á»ƒ chá»‰ Ä‘á»‹nh nhiá»u file (há»— trá»£ glob pattern nhÆ° *.yaml)
- âœ… Flag `--workers` Ä‘á»ƒ cháº¡y song song vá»›i sá»‘ worker processes
- âœ… ProcessPoolExecutor Ä‘á»ƒ cháº¡y Ä‘a tiáº¿n trÃ¬nh thá»±c sá»±

================================================================================
2. CÃš PHÃP CHÃNH XÃC
================================================================================

2.1 CÃº phÃ¡p cÆ¡ báº£n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest <BASE_URL> --tests "<GLOB_PATTERN>" --workers <NUMBER>

2.2 VÃ­ dá»¥ cá»§a báº¡n
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml" --workers 5

âš ï¸  LÆ¯U Ã: Cáº§n thÃªm flag --tests trÆ°á»›c glob pattern!

================================================================================
3. CÃC VÃ Dá»¤ Sá»¬ Dá»¤NG
================================================================================

3.1 Cháº¡y táº¥t cáº£ file .yaml trong thÆ° má»¥c (tuáº§n tá»±)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml"

hoáº·c

pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml" --workers 1

3.2 Cháº¡y song song vá»›i 5 workers
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml" --workers 5

3.3 Cháº¡y nhiá»u file cá»¥ thá»ƒ (comma-separated)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "test1.yaml,test2.yaml,test3.yaml" --workers 3

3.4 Cháº¡y vá»›i retry + concurrency + parallel
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 \
  --tests "api_test/suites/*.yaml" \
  --workers 5 \
  --max-retries 3 \
  --max-concurrency 10 \
  --log INFO

3.5 Cháº¡y vá»›i nhiá»u patterns khÃ¡c nhau
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 \
  --tests "tests/smoke/*.yaml,tests/integration/*.yaml" \
  --workers 4

================================================================================
4. CÃCH HOáº T Äá»˜NG
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LUá»’NG THá»°C THI                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Parse CLI arguments
   â”œâ”€ base_url: http://localhost:8000
   â”œâ”€ --tests: "api_test/suites/*.yaml"
   â””â”€ --workers: 5

2. Expand glob pattern
   â”œâ”€ api_test/suites/test1.yaml
   â”œâ”€ api_test/suites/test2.yaml
   â”œâ”€ api_test/suites/test3.yaml
   â”œâ”€ api_test/suites/test4.yaml
   â””â”€ api_test/suites/test5.yaml

3. Kiá»ƒm tra sá»‘ workers vs sá»‘ files
   â”œâ”€ Náº¿u workers > 1 VÃ€ cÃ³ nhiá»u files
   â”‚  â””â”€ Cháº¡y song song vá»›i ProcessPoolExecutor
   â””â”€ Náº¿u workers = 1 HOáº¶C chá»‰ 1 file
      â””â”€ Cháº¡y tuáº§n tá»±

4. Parallel execution (workers = 5)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Worker 1    â”‚ â†’ test1.yaml
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Worker 2    â”‚ â†’ test2.yaml
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Worker 3    â”‚ â†’ test3.yaml
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Worker 4    â”‚ â†’ test4.yaml
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ Worker 5    â”‚ â†’ test5.yaml
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Má»—i worker cháº¡y má»™t file Ä‘á»™c láº­p trong process riÃªng

5. Thu tháº­p káº¿t quáº£
   â”œâ”€ Má»—i worker tráº£ vá»: (filename, failures, error)
   â””â”€ Main process gom tá»•ng failures

6. Exit code
   â””â”€ 0 náº¿u táº¥t cáº£ pass, >0 náº¿u cÃ³ failures

================================================================================
5. FLAGS LIÃŠN QUAN
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flag            â”‚ MÃ´ táº£                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --tests         â”‚ Glob pattern hoáº·c danh sÃ¡ch files (comma-separated)    â”‚
â”‚                 â”‚ VD: "tests/*.yaml" hoáº·c "a.yaml,b.yaml"                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --workers       â”‚ Sá»‘ worker processes (default: 1)                       â”‚
â”‚                 â”‚ VD: --workers 5                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --max-retries   â”‚ Sá»‘ láº§n retry tá»‘i Ä‘a cho má»—i request (default: 0)      â”‚
â”‚                 â”‚ VD: --max-retries 3                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --max-concurrencyâ”‚ Sá»‘ requests Ä‘á»“ng thá»i trong má»—i file (default: auto) â”‚
â”‚                 â”‚ VD: --max-concurrency 10                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ --log           â”‚ Log level (DEBUG/INFO/WARNING/ERROR)                   â”‚
â”‚                 â”‚ VD: --log INFO                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
6. Sá» WORKERS NÃŠN DÃ™NG BAO NHIÃŠU?
================================================================================

6.1 NguyÃªn táº¯c chung
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
workers = min(sá»‘_files, sá»‘_CPU_cores)

6.2 Khuyáº¿n nghá»‹ theo sá»‘ lÆ°á»£ng files
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sá»‘ files        â”‚ Workers khuyáº¿n nghá»‹ â”‚ LÃ½ do                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1-3 files       â”‚ 1-2             â”‚ Ãt file, parallel overhead cao   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4-8 files       â”‚ 4               â”‚ CÃ¢n báº±ng tá»‘t                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 9-20 files      â”‚ 4-8             â”‚ Táº­n dá»¥ng CPU cores               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 20+ files       â”‚ 8-16            â”‚ Tá»‘i Ä‘a = sá»‘ CPU cores            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6.3 Kiá»ƒm tra sá»‘ CPU cores
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Linux/Mac
nproc
# hoáº·c
python -c "import os; print(os.cpu_count())"

# Output: 8 â†’ nÃªn dÃ¹ng max workers = 8

6.4 VÃ­ dá»¥ vá»›i laptop 8 cores, 20 test files
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "tests/*.yaml" --workers 8

Káº¿t quáº£:
- 8 files Ä‘áº§u cháº¡y Ä‘á»“ng thá»i (workers 1-8)
- 8 files tiáº¿p theo cháº¡y khi cÃ³ worker ráº£nh
- 4 files cuá»‘i cháº¡y khi cÃ³ worker ráº£nh
Total time â‰ˆ 20/8 = ~2.5x nhanh hÆ¡n tuáº§n tá»±

================================================================================
7. SO SÃNH: TUáº¦N Tá»° VS SONG SONG
================================================================================

7.1 Giáº£ Ä‘á»‹nh
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- 10 test files
- Má»—i file máº¥t ~30 giÃ¢y Ä‘á»ƒ cháº¡y

7.2 Cháº¡y tuáº§n tá»± (workers=1)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "tests/*.yaml" --workers 1

Timeline:
File 1: [==============================] 30s
File 2: [==============================] 30s
File 3: [==============================] 30s
...
File 10: [==============================] 30s

Total time: 10 Ã— 30s = 300s (5 phÃºt)

7.3 Cháº¡y song song (workers=5)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 --tests "tests/*.yaml" --workers 5

Timeline:
Worker 1: File 1 [======] â†’ File 6 [======]
Worker 2: File 2 [======] â†’ File 7 [======]
Worker 3: File 3 [======] â†’ File 8 [======]
Worker 4: File 4 [======] â†’ File 9 [======]
Worker 5: File 5 [======] â†’ File 10 [======]

Total time: (10 / 5) Ã— 30s = 60s (1 phÃºt)

ğŸš€ SPEED UP: 5x nhanh hÆ¡n!

================================================================================
8. Xá»¬ LÃ Lá»–I VÃ€ LOGGING
================================================================================

8.1 Khi má»™t file tháº¥t báº¡i
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Worker Ä‘Ã³ sáº½ bÃ¡o lá»—i
- CÃ¡c workers khÃ¡c váº«n tiáº¿p tá»¥c cháº¡y
- Káº¿t quáº£ cuá»‘i cÃ¹ng gom táº¥t cáº£ failures

VÃ­ dá»¥ output:
```
INFO: Executing 5 test files in parallel (processes=5)
INFO: test1.yaml: 0 failures
ERROR: test2.yaml: 2 failures
INFO: test3.yaml: 0 failures
INFO: test4.yaml: 0 failures
ERROR: test5.yaml: 1 failure

Total: 3 failures across 5 files
Exit code: 3
```

8.2 Logging vá»›i --log INFO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 \
  --tests "tests/*.yaml" \
  --workers 5 \
  --log INFO

Sáº½ hiá»ƒn thá»‹:
- INFO: Executing N test files in parallel
- INFO: Test Succeeded: ... Response Time: XXX.XXms
- ERROR: Test Failed: ... Response Time: XXX.XXms

================================================================================
9. TÃCH Há»¢P Vá»šI RETRY VÃ€ CONCURRENCY
================================================================================

9.1 Káº¿t há»£p táº¥t cáº£ tÃ­nh nÄƒng
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
pyresttest http://localhost:8000 \
  --tests "api_test/suites/*.yaml" \
  --workers 5 \
  --max-retries 3 \
  --retry-backoff-base 0.5 \
  --retry-backoff-max 30 \
  --max-concurrency 10 \
  --log INFO

CÃ¡ch hoáº¡t Ä‘á»™ng:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Level 1: File Parallelism (--workers 5)                            â”‚
â”‚   â”œâ”€ 5 processes cháº¡y 5 files Ä‘á»“ng thá»i                            â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â””â”€ Má»—i process:                                                  â”‚
â”‚       â”‚                                                             â”‚
â”‚       â”œâ”€ Level 2: Test Concurrency (--max-concurrency 10)          â”‚
â”‚       â”‚   â””â”€ 10 tests cháº¡y Ä‘á»“ng thá»i trong file Ä‘Ã³                 â”‚
â”‚       â”‚                                                             â”‚
â”‚       â””â”€ Level 3: Retry (--max-retries 3)                          â”‚
â”‚           â””â”€ Má»—i test retry tá»‘i Ä‘a 3 láº§n náº¿u tháº¥t báº¡i              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

9.2 Performance boost tá»•ng thá»ƒ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- File parallelism: 5x speedup (5 workers)
- Test concurrency: 10x speedup trong má»—i file
- Tá»•ng theoretical speedup: lÃªn Ä‘áº¿n 50x so vá»›i tuáº§n tá»± Ä‘Æ¡n luá»“ng

================================================================================
10. TROUBLESHOOTING
================================================================================

10.1 Lá»—i: "No test files specified"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âŒ SAI:
pyresttest http://localhost:8000 api_test/suites/*.yaml --workers 5

âœ… ÄÃšNG:
pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml" --workers 5

LÃ½ do: Cáº§n flag --tests Ä‘á»ƒ chá»‰ Ä‘á»‹nh glob pattern

10.2 Glob pattern khÃ´ng match file nÃ o
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Kiá»ƒm tra:
ls api_test/suites/*.yaml

Náº¿u khÃ´ng cÃ³ file â†’ táº¡o files test hoáº·c sá»­a pattern

10.3 Workers quÃ¡ nhiá»u lÃ m cháº­m
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Triá»‡u chá»©ng: workers=20 cháº­m hÆ¡n workers=4

NguyÃªn nhÃ¢n: Process overhead, context switching

Giáº£i phÃ¡p: Giáº£m workers xuá»‘ng = sá»‘ CPU cores

10.4 Má»™t file lÃ m cháº­m toÃ n bá»™
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Triá»‡u chá»©ng: 4/5 files xong nhanh, 1 file máº¥t ráº¥t lÃ¢u

Giáº£i phÃ¡p:
1. TÃ¡ch file cháº­m thÃ nh nhiá»u files nhá» hÆ¡n
2. TÄƒng sá»‘ workers Ä‘á»ƒ file cháº­m khÃ´ng block cÃ¡c files khÃ¡c

================================================================================
11. BEST PRACTICES
================================================================================

âœ… DO (NÃŠN):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Äáº·t glob pattern trong dáº¥u ngoáº·c kÃ©p
   pyresttest URL --tests "tests/*.yaml" --workers 4
   
2. DÃ¹ng workers = sá»‘ CPU cores cho hiá»‡u quáº£ tá»‘i Æ°u
   pyresttest URL --tests "tests/*.yaml" --workers 8
   
3. Káº¿t há»£p vá»›i --log INFO Ä‘á»ƒ theo dÃµi progress
   pyresttest URL --tests "tests/*.yaml" --workers 4 --log INFO
   
4. Chia tests thÃ nh nhiá»u files nhá» Ä‘á»ƒ parallel hiá»‡u quáº£
   tests/
   â”œâ”€â”€ auth.yaml (5 tests)
   â”œâ”€â”€ users.yaml (10 tests)
   â”œâ”€â”€ posts.yaml (8 tests)
   â””â”€â”€ comments.yaml (12 tests)

âŒ DON'T (KHÃ”NG NÃŠN):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. QuÃªn dáº¥u ngoáº·c kÃ©p vá»›i glob pattern
   âŒ pyresttest URL --tests tests/*.yaml
   
2. DÃ¹ng workers quÃ¡ cao (> sá»‘ CPU cores)
   âŒ pyresttest URL --tests "tests/*.yaml" --workers 100
   
3. Táº¥t cáº£ tests trong 1 file duy nháº¥t
   âŒ all_tests.yaml (1000 tests) â†’ khÃ´ng táº­n dá»¥ng Ä‘Æ°á»£c parallel
   
4. DÃ¹ng parallel cho Ã­t files
   âŒ --workers 10 cho 2 files â†’ overhead cao

================================================================================
12. Káº¾T LUáº¬N
================================================================================

âœ… TRáº NG THÃI: Dá»° ÃN ÄÃƒ Há»– TRá»¢ Äáº¦Y Äá»¦

Lá»‡nh cá»§a báº¡n:
```
pyresttest http://localhost:8000 api_test/suites/*.yaml --workers 5
```

Cáº§n sá»­a thÃ nh:
```
pyresttest http://localhost:8000 --tests "api_test/suites/*.yaml" --workers 5
```

Hoáº·c Ä‘áº§y Ä‘á»§ hÆ¡n:
```
pyresttest http://localhost:8000 \
  --tests "api_test/suites/*.yaml" \
  --workers 5 \
  --max-retries 3 \
  --max-concurrency 10 \
  --log INFO
```

ğŸš€ Lá»¢I ÃCH:
- âœ… Giáº£m thá»i gian cháº¡y test suite tá»« phÃºt â†’ giÃ¢y
- âœ… Táº­n dá»¥ng CPU multi-core
- âœ… Káº¿t há»£p vá»›i retry/concurrency cho Ä‘á»™ tin cáº­y cao
- âœ… Hiá»ƒn thá»‹ response time cho má»—i test
- âœ… CI/CD pipeline nhanh hÆ¡n Ä‘Ã¡ng ká»ƒ

Háº¾T
================================================================================
